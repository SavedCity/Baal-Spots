{"ast":null,"code":"\"use strict\";\n\nvar restoreFunctions = [];\n\nfunction after(host, name, cb) {\n  var originalFn = host[name];\n  var restoreFn;\n\n  if (originalFn) {\n    host[name] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      originalFn.apply(this, args);\n      cb(host);\n    };\n\n    restoreFn = function () {\n      host[name] = originalFn;\n    };\n  } else {\n    host[name] = function () {\n      cb(host);\n    };\n\n    restoreFn = function () {\n      delete host[name];\n    };\n  }\n\n  restoreFunctions.push(restoreFn);\n}\n\nafter.restorePatchedMethods = function () {\n  restoreFunctions.forEach(function (restoreFn) {\n    return restoreFn();\n  });\n  restoreFunctions = [];\n};\n\nmodule.exports = after;","map":{"version":3,"sources":["../after.ts"],"names":[],"mappings":";;AAAA,IAAI,gBAAgB,GAAe,EAAnC;;AAEA,SAAS,KAAT,CAAe,IAAf,EAAsC,IAAtC,EAAoD,EAApD,EAAgE;AAC9D,MAAM,UAAU,GAAa,IAAI,CAAC,IAAD,CAAjC;AACA,MAAI,SAAJ;;AAEA,MAAI,UAAJ,EAAgB;AACd,IAAA,IAAI,CAAC,IAAD,CAAJ,GAAa,YAAA;AAAS,UAAA,IAAA,GAAA,EAAA;;WAAA,IAAA,EAAA,GAAA,C,EAAA,EAAA,GAAA,SAAA,CAAA,M,EAAA,EAAA,E,EAAO;AAAP,QAAA,IAAA,CAAA,EAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;;AACpB,MAAA,UAAU,CAAC,KAAX,CAAiB,IAAjB,EAAuB,IAAvB;AACA,MAAA,EAAE,CAAC,IAAD,CAAF;AACD,KAHD;;AAIA,IAAA,SAAS,GAAG,YAAA;AACV,MAAA,IAAI,CAAC,IAAD,CAAJ,GAAa,UAAb;AACD,KAFD;AAGD,GARD,MAQO;AACL,IAAA,IAAI,CAAC,IAAD,CAAJ,GAAa,YAAA;AACX,MAAA,EAAE,CAAC,IAAD,CAAF;AACD,KAFD;;AAGA,IAAA,SAAS,GAAG,YAAA;AACV,aAAO,IAAI,CAAC,IAAD,CAAX;AACD,KAFD;AAGD;;AAED,EAAA,gBAAgB,CAAC,IAAjB,CAAsB,SAAtB;AACD;;AAED,KAAK,CAAC,qBAAN,GAA8B,YAAA;AAC5B,EAAA,gBAAgB,CAAC,OAAjB,CAAyB,UAAA,SAAA,EAAS;AAAI,WAAA,SAAA,EAAA;AAAW,GAAjD;AACA,EAAA,gBAAgB,GAAG,EAAnB;AACD,CAHD;;AAKA,MAAA,CAAA,OAAA,GAAS,KAAT","sourcesContent":["\"use strict\";\nvar restoreFunctions = [];\nfunction after(host, name, cb) {\n    var originalFn = host[name];\n    var restoreFn;\n    if (originalFn) {\n        host[name] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            originalFn.apply(this, args);\n            cb(host);\n        };\n        restoreFn = function () {\n            host[name] = originalFn;\n        };\n    }\n    else {\n        host[name] = function () {\n            cb(host);\n        };\n        restoreFn = function () {\n            delete host[name];\n        };\n    }\n    restoreFunctions.push(restoreFn);\n}\nafter.restorePatchedMethods = function () {\n    restoreFunctions.forEach(function (restoreFn) { return restoreFn(); });\n    restoreFunctions = [];\n};\nmodule.exports = after;\n"]},"metadata":{},"sourceType":"script"}